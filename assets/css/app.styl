@import 'nib'
@import '../../node_modules/jeet/stylus/jeet/*'
@import '_mixins.styl'

// Media queries
$xl = 1600px
$lg = 1260px
$md = 1023px
$sm = 767px

// Colors
$primary ?= #fff
$secondary ?= #000
$accent ?= #ff0000

// Metrics
$padding = 3rem
$zIndex = 100

// CSS Reset
global-reset()

body,html
	width 100%
	-webkit-text-size-adjust 100%
	background $primary

html
	font-size 62.5%

body
	span(1)
	text-rendering optimizeLegibility
	font-smoothing()
	font-size 2rem
	letter-spacing .02em
	font-family 'Helvetica Neue', 'Arial', sans-serif
	font-weight 200
	color $secondary
	+below($md)
		font-size 1.5rem

h1, h2
	text-transform uppercase
	line-height 100%

em
	font-style italic

p, h1, h2
	margin-bottom 1em
	line-height 100%

p:last-child
	margin-bottom 0

.menu-item, .project-title
	font-size 4.5rem
	+below($md)
		font-size 2rem

.project-description, #news, #contact
	font-size 1.1rem

::selection
	background $secondary
	
::-moz-selection
	background $secondary

*
	hideselect()
	box-sizing(border-box)

a, a:hover, a:visited, a:focus
	color inherit
	text-decoration none
	cursor pointer

img.lazyimg
	transition(opacity 500ms ease)
	opacity 0

img.lazyimg.lazyloaded
	opacity 1

// @keyframes color {
//     100%, 0% {
//         stroke: $secondary
//     }
//     50% {
//         stroke: alpha($secondary,0.4)
//     }
//     66% {
//         stroke: alpha($secondary,0.4)
//     }
//     80%, 90% {
//         stroke: alpha($secondary,0.4)
//     }
// }

@keyframes rotate {
    100% {
        transform(rotate(360deg))
    }
}

@keyframes dash {
    0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0
    }
    30% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -35px
    }
    100% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -124px
    }
}

#loader
	overflow hidden
	position fixed
	width 100%
	height 100%
	top 0
	left 0
	background $primary
	z-index 1000
	.spinner
		width 50px
		height 50px
		align()
		.circular
			animation rotate 2s linear infinite
			height 100%
			transform-origin center center
			width 100%
			position absolute
			top 0
			bottom 0
			left 0
			right 0
			margin auto
			.path
				stroke $secondary
				stroke-dasharray 1, 200
				stroke-dashoffset 0
				animation dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite

#intro
	position fixed
	transition(height 1600ms cubic-bezier(.72,0,.01,1))
	transition-delay(300ms)
	overflow hidden
	width 100%
	height 100vh
	bottom 0
	left 0
	background $primary
	flexbox()
	justify-content center
	align-items center
	cursor pointer
	z-index 800
	backface()
	span
		transition(opacity 300ms ease)
		opacity 1
		width 15%

header
	position fixed
	top 0
	left 0
	width 100%
	padding $padding
	flexbox()
	justify-content space-between
	align-items top
	z-index 100
	#site-title
		width 70px
		align(horizontal)
		top $padding
	.menu-item
		transition all 400ms ease
		height 0
		overflow hidden
		//visibility hidden
		//opacity 0
		span
			display block
			transition transform 400ms ease
			transform(translate3d(0,-50%,0))
			
body:not(.page)
	header:hover
		.menu-item
			height 1.1em
			transition all 400ms ease
			visibility visible
			opacity 1
			span
				transform(translate3d(0,0%,0))

#wrapper
	span(1)

#container-left
	transform(translate3d(-100%,0,0))
	//overflow-y scroll
	//-webkit-overflow-scrolling touch

#container-right
	transform(translate3d(100%,0,0))
	//overflow-y scroll
	//-webkit-overflow-scrolling touch

.container
	transition(transform 800ms ease)
	position fixed
	top 0
	left 0
	width 100%
	height 100%
	.inner
		span(1)
	.inner.page
		padding $padding
		font-size 1.5rem
		.section-content
			margin-bottom 1em
		.section-content:last-child
			margin-bottom 0
	.column
		span(1/2)
	.column.fixed
		width 'calc(100% - %s)' % $padding
		height 'calc(100vh - %s)' % ($padding*2)
		position fixed
		top $padding
		left $padding
		#contact
			position absolute
			bottom 0
			left 0
	.column.fixed + .column
		span(1/2, offset: 1/2)
	.text-content
		text-align justify
		span(8/10)
		p
			line-height 110%
	h2.section-title
		margin-bottom 0
	.news
		margin-bottom 1em
	.news:first-of-type
		margin-top 2em
	#contact
		cursor pointer
	.drawer
		display none
		margin-top 2em
	#projects-menu
		transition(transform 600ms ease)
		position fixed
		left 0
		bottom 0
		width 100%
		padding $padding
		flexbox()
		justify-content space-between
		align-items center
		.menu-item
			transition(width 400ms ease)
			text-align center
			width 1.2em
			margin 0 0.1em
		.menu-item:first-child
			text-align left
		.menu-item:last-child
			text-align right
		.menu-item.active
			width 100%

#imagefeed
	span(1)
	margin-top 'calc(12.5vh + %s)' % $padding
	.content
		span(1)
		height 50vh
		max-height 400px
		margin-bottom 120px
		text-align center
		+below($md)
			width 100%
			height auto
			max-height 100%
		img
			display inline-block

#slider
	width 100%
	.project
		.content
			span(1)
			img
				display block
				float left
		.content.half
			img
				width 50%
		.content.fitheight
			height 100vh
			img
				width auto
				height 100%
		.content.right
			img
				float right
	.project-infos
		span(1)
		height 50vh
		padding $padding
		.project-description
			margin-top 1em
			margin-left .3em
			+below($md)
				margin-left 0

body.intro-hidden
	#intro
		height 0
		span
			opacity 0

body.loading
	#container
		.inner.page
			opacity 0


body.page-left
	#container-left
		transform(translate3d(0%,0,0) !important)
	#container, #projects-menu
		transform(translate3d(100%,0,0) !important)

body.page-right
	#container-right
		transform(translate3d(0%,0,0) !important)
	#container, #projects-menu
		transform(translate3d(-100%,0,0) !important)